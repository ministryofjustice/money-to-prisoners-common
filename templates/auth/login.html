{% extends 'base.html' %}
{% load i18n %}
{% load mtp_utils %}
{% load widget_tweaks %}

{% block content %}
  <h1>
    {% block auth_title %}
      {% trans 'Money sent to prisoners' %}
    {% endblock %}
  </h1>
  <h2>{%trans 'Sign in' %}</h2>

  <div class="container">
    <div class="grid-row">
      <div class="column-two-thirds">
        {% include 'mtp_utils/forms/error-summary.html' with form=form only %}

        <form action="{{ app_path }}" method="post" id="login-form">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ next }}">

          {% for field in form %}
            <div class="form-group {% if field.errors %}error{% endif %}">
              {% include 'mtp_utils/forms/field-label.html' with field=field only %}
              {% include 'mtp_utils/forms/field-errors.html' with field=field only %}
              {{ field|attr:'autocomplete:off'|add_class:'form-control' }}
            </div>
          {% endfor %}

          <div class="form-group">
            <button type="submit" class="button" name="signin">{% trans 'Sign in' %}</button>
          </div>
        </form>

        {% url 'reset_password' as reset_password_url %}
        {% if reset_password_url %}
          <p><a href="{{ reset_password_url }}">{% trans 'Forgotten your password?' %}</a></p>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock content %}
