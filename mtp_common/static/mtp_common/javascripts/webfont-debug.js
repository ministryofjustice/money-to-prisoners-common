/*
 * Copyright 2012 Small Batch, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
var webfont={};webfont.bind=function(t,e,n){var o=arguments.length>2?Array.prototype.slice.call(arguments,2):[];return function(){return o.push.apply(o,arguments),e.apply(t,o)}},webfont.extendsClass=function(t,e){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superCtor_=t,e.super_=t.prototype},webfont.DomHelper=function(t,e){this.document_=t,this.userAgent_=e},webfont.DomHelper.prototype.createElement=function(t,e,n){var o=this.document_.createElement(t);if(e)for(var i in e)e.hasOwnProperty(i)&&("style"==i?this.setStyle(o,e[i]):o.setAttribute(i,e[i]));return n&&o.appendChild(this.document_.createTextNode(n)),o},webfont.DomHelper.prototype.insertInto=function(t,e){var n=this.document_.getElementsByTagName(t)[0];return n||(n=document.documentElement),n&&n.lastChild?(n.insertBefore(e,n.lastChild),!0):!1},webfont.DomHelper.prototype.whenBodyExists=function(t){var e=function(){document.body?t():setTimeout(e,0)};e()},webfont.DomHelper.prototype.removeElement=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},webfont.DomHelper.prototype.createCssLink=function(t){return this.createElement("link",{rel:"stylesheet",href:t})},webfont.DomHelper.prototype.createScriptSrc=function(t){return this.createElement("script",{src:t})},webfont.DomHelper.prototype.appendClassName=function(t,e){for(var n=t.className.split(/\s+/),o=0,i=n.length;i>o;o++)if(n[o]==e)return;n.push(e),t.className=n.join(" ").replace(/^\s+/,"")},webfont.DomHelper.prototype.removeClassName=function(t,e){for(var n=t.className.split(/\s+/),o=[],i=0,r=n.length;r>i;i++)n[i]!=e&&o.push(n[i]);t.className=o.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")},webfont.DomHelper.prototype.hasClassName=function(t,e){for(var n=t.className.split(/\s+/),o=0,i=n.length;i>o;o++)if(n[o]==e)return!0;return!1},webfont.DomHelper.prototype.setStyle=function(t,e){"MSIE"==this.userAgent_.getName()?t.style.cssText=e:t.setAttribute("style",e)},webfont.UserAgent=function(t,e,n,o,i,r,s,a){this.name_=t,this.version_=e,this.engine_=n,this.engineVersion_=o,this.platform_=i,this.platformVersion_=r,this.documentMode_=s,this.webFontSupport_=a},webfont.UserAgent.prototype.getName=function(){return this.name_},webfont.UserAgent.prototype.getVersion=function(){return this.version_},webfont.UserAgent.prototype.getEngine=function(){return this.engine_},webfont.UserAgent.prototype.getEngineVersion=function(){return this.engineVersion_},webfont.UserAgent.prototype.getPlatform=function(){return this.platform_},webfont.UserAgent.prototype.getPlatformVersion=function(){return this.platformVersion_},webfont.UserAgent.prototype.getDocumentMode=function(){return this.documentMode_},webfont.UserAgent.prototype.isSupportingWebFont=function(){return this.webFontSupport_},webfont.UserAgentParser=function(t,e){this.userAgent_=t,this.doc_=e},webfont.UserAgentParser.UNKNOWN="Unknown",webfont.UserAgentParser.UNKNOWN_USER_AGENT=new webfont.UserAgent(webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,void 0,!1),webfont.UserAgentParser.prototype.parse=function(){return this.isIe_()?this.parseIeUserAgentString_():this.isOpera_()?this.parseOperaUserAgentString_():this.isWebKit_()?this.parseWebKitUserAgentString_():this.isGecko_()?this.parseGeckoUserAgentString_():webfont.UserAgentParser.UNKNOWN_USER_AGENT},webfont.UserAgentParser.prototype.getPlatform_=function(){var t=this.getMatchingGroup_(this.userAgent_,/(iPod|iPad|iPhone|Android)/,1);if(""!=t)return t;var e=this.getMatchingGroup_(this.userAgent_,/(Linux|Mac_PowerPC|Macintosh|Windows)/,1);return""!=e?("Mac_PowerPC"==e&&(e="Macintosh"),e):webfont.UserAgentParser.UNKNOWN},webfont.UserAgentParser.prototype.getPlatformVersion_=function(){var t=this.getMatchingGroup_(this.userAgent_,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(t)return t;var e=this.getMatchingGroup_(this.userAgent_,/(iPhone )?OS ([\d_]+)/,2);if(e)return e;var n=this.getMatchingGroup_(this.userAgent_,/Linux ([i\d]+)/,1);return n?n:webfont.UserAgentParser.UNKNOWN},webfont.UserAgentParser.prototype.isIe_=function(){return-1!=this.userAgent_.indexOf("MSIE")},webfont.UserAgentParser.prototype.parseIeUserAgentString_=function(){var t=this.getMatchingGroup_(this.userAgent_,/(MSIE [\d\w\.]+)/,1);webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN;if(""!=t){var e=t.split(" "),n=e[0],o=e[1];return new webfont.UserAgent(n,o,n,o,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),this.getMajorVersion_(o)>=6)}return new webfont.UserAgent("MSIE",webfont.UserAgentParser.UNKNOWN,"MSIE",webfont.UserAgentParser.UNKNOWN,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),!1)},webfont.UserAgentParser.prototype.isOpera_=function(){return-1!=this.userAgent_.indexOf("Opera")},webfont.UserAgentParser.prototype.parseOperaUserAgentString_=function(){var t=webfont.UserAgentParser.UNKNOWN,e=webfont.UserAgentParser.UNKNOWN,n=this.getMatchingGroup_(this.userAgent_,/(Presto\/[\d\w\.]+)/,1);if(""!=n){var o=n.split("/");t=o[0],e=o[1]}else{-1!=this.userAgent_.indexOf("Gecko")&&(t="Gecko");var i=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);""!=i&&(e=i)}if(-1!=this.userAgent_.indexOf("Version/")){var r=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.]+)/,1);if(""!=r)return new webfont.UserAgent("Opera",r,t,e,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),this.getMajorVersion_(r)>=10)}var r=this.getMatchingGroup_(this.userAgent_,/Opera[\/ ]([\d\.]+)/,1);return""!=r?new webfont.UserAgent("Opera",r,t,e,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),this.getMajorVersion_(r)>=10):new webfont.UserAgent("Opera",webfont.UserAgentParser.UNKNOWN,t,e,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),!1)},webfont.UserAgentParser.prototype.isWebKit_=function(){return-1!=this.userAgent_.indexOf("AppleWebKit")},webfont.UserAgentParser.prototype.parseWebKitUserAgentString_=function(){var t=this.getPlatform_(),e=this.getPlatformVersion_(),n=this.getMatchingGroup_(this.userAgent_,/AppleWebKit\/([\d\.\+]+)/,1);""==n&&(n=webfont.UserAgentParser.UNKNOWN);var o=webfont.UserAgentParser.UNKNOWN;-1!=this.userAgent_.indexOf("Chrome")?o="Chrome":-1!=this.userAgent_.indexOf("Safari")?o="Safari":-1!=this.userAgent_.indexOf("AdobeAIR")&&(o="AdobeAIR");var i=webfont.UserAgentParser.UNKNOWN;-1!=this.userAgent_.indexOf("Version/")?i=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.\w]+)/,1):"Chrome"==o?i=this.getMatchingGroup_(this.userAgent_,/Chrome\/([\d\.]+)/,1):"AdobeAIR"==o&&(i=this.getMatchingGroup_(this.userAgent_,/AdobeAIR\/([\d\.]+)/,1));var r=!1;if("AdobeAIR"==o){var s=this.getMatchingGroup_(i,/\d+\.(\d+)/,1);r=this.getMajorVersion_(i)>2||2==this.getMajorVersion_(i)&&parseInt(s,10)>=5}else{var s=this.getMatchingGroup_(n,/\d+\.(\d+)/,1);r=this.getMajorVersion_(n)>=526||this.getMajorVersion_(n)>=525&&parseInt(s,10)>=13}return new webfont.UserAgent(o,i,"AppleWebKit",n,t,e,this.getDocumentMode_(this.doc_),r)},webfont.UserAgentParser.prototype.isGecko_=function(){return-1!=this.userAgent_.indexOf("Gecko")},webfont.UserAgentParser.prototype.parseGeckoUserAgentString_=function(){var t=webfont.UserAgentParser.UNKNOWN,e=webfont.UserAgentParser.UNKNOWN,n=!1;if(-1!=this.userAgent_.indexOf("Firefox")){t="Firefox";var o=this.getMatchingGroup_(this.userAgent_,/Firefox\/([\d\w\.]+)/,1);if(""!=o){var i=this.getMatchingGroup_(o,/\d+\.(\d+)/,1);e=o,n=""!=o&&this.getMajorVersion_(o)>=3&&parseInt(i,10)>=5}}else-1!=this.userAgent_.indexOf("Mozilla")&&(t="Mozilla");var r=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);if(""==r)r=webfont.UserAgentParser.UNKNOWN;else if(!n){var s=this.getMajorVersion_(r),a=parseInt(this.getMatchingGroup_(r,/\d+\.(\d+)/,1),10),h=parseInt(this.getMatchingGroup_(r,/\d+\.\d+\.(\d+)/,1),10);n=s>1||1==s&&a>9||1==s&&9==a&&h>=2||null!=r.match(/1\.9\.1b[123]/)||null!=r.match(/1\.9\.1\.[\d\.]+/)}return new webfont.UserAgent(t,e,"Gecko",r,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),n)},webfont.UserAgentParser.prototype.getMajorVersion_=function(t){var e=this.getMatchingGroup_(t,/(\d+)/,1);return""!=e?parseInt(e,10):-1},webfont.UserAgentParser.prototype.getMatchingGroup_=function(t,e,n){var o=t.match(e);return o&&o[n]?o[n]:""},webfont.UserAgentParser.prototype.getDocumentMode_=function(t){return t.documentMode?t.documentMode:void 0},webfont.EventDispatcher=function(t,e,n,o){this.domHelper_=t,this.htmlElement_=e,this.callbacks_=n,this.namespace_=o||webfont.EventDispatcher.DEFAULT_NAMESPACE,this.cssClassName_=new webfont.CssClassName("-")},webfont.EventDispatcher.DEFAULT_NAMESPACE="wf",webfont.EventDispatcher.LOADING="loading",webfont.EventDispatcher.ACTIVE="active",webfont.EventDispatcher.INACTIVE="inactive",webfont.EventDispatcher.FONT="font",webfont.EventDispatcher.prototype.dispatchLoading=function(){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.dispatch_(webfont.EventDispatcher.LOADING)},webfont.EventDispatcher.prototype.dispatchFontLoading=function(t,e){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.LOADING)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.LOADING,t,e)},webfont.EventDispatcher.prototype.dispatchFontActive=function(t,e){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.LOADING)),this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.INACTIVE)),this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.ACTIVE)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.ACTIVE,t,e)},webfont.EventDispatcher.prototype.dispatchFontInactive=function(t,e){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.LOADING));var n=this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.ACTIVE));n||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,t,e,webfont.EventDispatcher.INACTIVE)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.INACTIVE,t,e)},webfont.EventDispatcher.prototype.dispatchInactive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));var t=this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE));t||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE)),this.dispatch_(webfont.EventDispatcher.INACTIVE)},webfont.EventDispatcher.prototype.dispatchActive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE)),this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE)),this.dispatch_(webfont.EventDispatcher.ACTIVE)},webfont.EventDispatcher.prototype.dispatch_=function(t,e,n){this.callbacks_[t]&&this.callbacks_[t](e,n)},webfont.FontModuleLoader=function(){this.modules_={}},webfont.FontModuleLoader.prototype.addModuleFactory=function(t,e){this.modules_[t]=e},webfont.FontModuleLoader.prototype.getModules=function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var o=this.modules_[n];o&&e.push(o(t[n]))}return e},webfont.FontWatcher=function(t,e,n,o,i){this.domHelper_=t,this.eventDispatcher_=e,this.fontSizer_=n,this.asyncCall_=o,this.getTime_=i,this.currentlyWatched_=0,this.last_=!1,this.success_=!1},webfont.FontWatcher.DEFAULT_VARIATION="n4",webfont.FontWatcher.prototype.watch=function(t,e,n,o,i){for(var r=t.length,s=0;r>s;s++){var a=t[s];e[a]||(e[a]=[webfont.FontWatcher.DEFAULT_VARIATION]),this.currentlyWatched_+=e[a].length}i&&(this.last_=i);for(var s=0;r>s;s++)for(var a=t[s],h=e[a],p=n[a],f=0,c=h.length;c>f;f++){var l=h[f];this.eventDispatcher_.dispatchFontLoading(a,l);var _=webfont.bind(this,this.fontActive_),u=webfont.bind(this,this.fontInactive_),d=new o(_,u,this.domHelper_,this.fontSizer_,this.asyncCall_,this.getTime_,a,l,p);d.start()}},webfont.FontWatcher.prototype.fontActive_=function(t,e){this.eventDispatcher_.dispatchFontActive(t,e),this.success_=!0,this.decreaseCurrentlyWatched_()},webfont.FontWatcher.prototype.fontInactive_=function(t,e){this.eventDispatcher_.dispatchFontInactive(t,e),this.decreaseCurrentlyWatched_()},webfont.FontWatcher.prototype.decreaseCurrentlyWatched_=function(){0==--this.currentlyWatched_&&this.last_&&(this.success_?this.eventDispatcher_.dispatchActive():this.eventDispatcher_.dispatchInactive())},webfont.FontWatchRunner=function(t,e,n,o,i,r,s,a,h){this.activeCallback_=t,this.inactiveCallback_=e,this.domHelper_=n,this.fontSizer_=o,this.asyncCall_=i,this.getTime_=r,this.nameHelper_=new webfont.CssFontFamilyName,this.fvd_=new webfont.FontVariationDescription,this.fontFamily_=s,this.fontDescription_=a,this.fontTestString_=h||webfont.FontWatchRunner.DEFAULT_TEST_STRING,this.originalSizeA_=this.getDefaultFontSize_(webfont.FontWatchRunner.DEFAULT_FONTS_A),this.originalSizeB_=this.getDefaultFontSize_(webfont.FontWatchRunner.DEFAULT_FONTS_B),this.lastObservedSizeA_=this.originalSizeA_,this.lastObservedSizeB_=this.originalSizeB_,this.requestedFontA_=this.createHiddenElementWithFont_(webfont.FontWatchRunner.DEFAULT_FONTS_A),this.requestedFontB_=this.createHiddenElementWithFont_(webfont.FontWatchRunner.DEFAULT_FONTS_B)},webfont.FontWatchRunner.DEFAULT_FONTS_A="arial,'URW Gothic L',sans-serif",webfont.FontWatchRunner.DEFAULT_FONTS_B="Georgia,'Century Schoolbook L',serif",webfont.FontWatchRunner.DEFAULT_TEST_STRING="BESbswy",webfont.FontWatchRunner.prototype.start=function(){this.started_=this.getTime_(),this.check_()},webfont.FontWatchRunner.prototype.check_=function(){var t=this.fontSizer_.getWidth(this.requestedFontA_),e=this.fontSizer_.getWidth(this.requestedFontB_);this.originalSizeA_==t&&this.originalSizeB_==e||this.lastObservedSizeA_!=t||this.lastObservedSizeB_!=e?this.getTime_()-this.started_>=5e3?this.finish_(this.inactiveCallback_):(this.lastObservedSizeA_=t,this.lastObservedSizeB_=e,this.asyncCheck_()):this.finish_(this.activeCallback_)},webfont.FontWatchRunner.prototype.asyncCheck_=function(){this.asyncCall_(function(t,e){return function(){e.call(t)}}(this,this.check_),25)},webfont.FontWatchRunner.prototype.finish_=function(t){this.domHelper_.removeElement(this.requestedFontA_),this.domHelper_.removeElement(this.requestedFontB_),t(this.fontFamily_,this.fontDescription_)},webfont.FontWatchRunner.prototype.getDefaultFontSize_=function(t){var e=this.createHiddenElementWithFont_(t,!0),n=this.fontSizer_.getWidth(e);return this.domHelper_.removeElement(e),n},webfont.FontWatchRunner.prototype.createHiddenElementWithFont_=function(t,e){var n=this.computeStyleString_(t,this.fontDescription_,e),o=this.domHelper_.createElement("span",{style:n},this.fontTestString_);return this.domHelper_.insertInto("body",o),o},webfont.FontWatchRunner.prototype.computeStyleString_=function(t,e,n){var o=this.fvd_.expand(e),i="position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;font-family:"+(n?"":this.nameHelper_.quote(this.fontFamily_)+",")+t+";"+o;return i},webfont.WebFont=function(t,e,n,o,i){this.domHelper_=t,this.fontModuleLoader_=e,this.htmlElement_=n,this.asyncCall_=o,this.userAgent_=i,this.moduleLoading_=0,this.moduleFailedLoading_=0},webfont.WebFont.prototype.addModule=function(t,e){this.fontModuleLoader_.addModuleFactory(t,e)},webfont.WebFont.prototype.load=function(t){var e=new webfont.EventDispatcher(this.domHelper_,this.htmlElement_,t);this.userAgent_.isSupportingWebFont()?this.load_(e,t):e.dispatchInactive()},webfont.WebFont.prototype.isModuleSupportingUserAgent_=function(t,e,n,o){var i=t.getFontWatchRunnerCtor?t.getFontWatchRunnerCtor():webfont.FontWatchRunner;if(!o){var r=0==--this.moduleLoading_;return this.moduleFailedLoading_--,r&&(0==this.moduleFailedLoading_?e.dispatchInactive():e.dispatchLoading()),void n.watch([],{},{},i,r)}t.load(webfont.bind(this,this.onModuleReady_,e,n,i))},webfont.WebFont.prototype.onModuleReady_=function(t,e,n,o,i,r){var s=0==--this.moduleLoading_;s&&t.dispatchLoading(),this.asyncCall_(webfont.bind(this,function(t,e,n,o,i,r){t.watch(e,n||{},o||{},i,r)},e,o,i,r,n,s))},webfont.WebFont.prototype.load_=function(t,e){var n=this.fontModuleLoader_.getModules(e),o=this;this.moduleFailedLoading_=this.moduleLoading_=n.length;for(var i=new webfont.FontWatcher(this.domHelper_,t,{getWidth:function(t){return t.offsetWidth}},o.asyncCall_,function(){return(new Date).getTime()}),r=0,s=n.length;s>r;r++){var a=n[r];a.supportUserAgent(this.userAgent_,webfont.bind(this,this.isModuleSupportingUserAgent_,a,t,i))}},webfont.CssClassName=function(t){this.joinChar_=t||webfont.CssClassName.DEFAULT_JOIN_CHAR},webfont.CssClassName.DEFAULT_JOIN_CHAR="-",webfont.CssClassName.prototype.sanitize=function(t){return t.replace(/[\W_]+/g,"").toLowerCase()},webfont.CssClassName.prototype.build=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(this.sanitize(arguments[n]));return e.join(this.joinChar_)},webfont.CssFontFamilyName=function(){this.quote_="'"},webfont.CssFontFamilyName.prototype.quote=function(t){for(var e=[],n=t.split(/,\s*/),o=0;o<n.length;o++){var i=n[o].replace(/['"]/g,"");-1==i.indexOf(" ")?e.push(i):e.push(this.quote_+i+this.quote_)}return e.join(",")},webfont.FontVariationDescription=function(){this.properties_=webfont.FontVariationDescription.PROPERTIES,this.values_=webfont.FontVariationDescription.VALUES},webfont.FontVariationDescription.PROPERTIES=["font-style","font-weight"],webfont.FontVariationDescription.VALUES={"font-style":[["n","normal"],["i","italic"],["o","oblique"]],"font-weight":[["1","100"],["2","200"],["3","300"],["4","400"],["5","500"],["6","600"],["7","700"],["8","800"],["9","900"],["4","normal"],["7","bold"]]},webfont.FontVariationDescription.Item=function(t,e,n){this.index_=t,this.property_=e,this.values_=n},webfont.FontVariationDescription.Item.prototype.compact=function(t,e){for(var n=0;n<this.values_.length;n++)if(e==this.values_[n][1])return void(t[this.index_]=this.values_[n][0])},webfont.FontVariationDescription.Item.prototype.expand=function(t,e){for(var n=0;n<this.values_.length;n++)if(e==this.values_[n][0])return void(t[this.index_]=this.property_+":"+this.values_[n][1])},webfont.FontVariationDescription.prototype.compact=function(t){for(var e=["n","4"],n=t.split(";"),o=0,i=n.length;i>o;o++){var r=n[o].replace(/\s+/g,"").split(":");if(2==r.length){var s=r[0],a=r[1],h=this.getItem_(s);h&&h.compact(e,a)}}return e.join("")},webfont.FontVariationDescription.prototype.expand=function(t){if(2!=t.length)return null;for(var e=[null,null],n=0,o=this.properties_.length;o>n;n++){var i=this.properties_[n],r=t.substr(n,1),s=this.values_[i],a=new webfont.FontVariationDescription.Item(n,i,s);a.expand(e,r)}return e[0]&&e[1]?e.join(";")+";":null},webfont.FontVariationDescription.prototype.getItem_=function(t){for(var e=0;e<this.properties_.length;e++)if(t==this.properties_[e]){var n=this.values_[t];return new webfont.FontVariationDescription.Item(e,t,n)}return null};var globalName="WebFont";window[globalName]=function(){var t=new webfont.UserAgentParser(navigator.userAgent,document),e=t.parse(),n=new webfont.DomHelper(document,e),o=function(t,e){setTimeout(t,e)};return new webfont.WebFont(n,new webfont.FontModuleLoader,document.documentElement,o,e)}(),window[globalName].load=window[globalName].load,window[globalName].addModule=window[globalName].addModule,webfont.UserAgent.prototype.getName=webfont.UserAgent.prototype.getName,webfont.UserAgent.prototype.getVersion=webfont.UserAgent.prototype.getVersion,webfont.UserAgent.prototype.getEngine=webfont.UserAgent.prototype.getEngine,webfont.UserAgent.prototype.getEngineVersion=webfont.UserAgent.prototype.getEngineVersion,webfont.UserAgent.prototype.getPlatform=webfont.UserAgent.prototype.getPlatform,webfont.UserAgent.prototype.getPlatformVersion=webfont.UserAgent.prototype.getPlatformVersion,webfont.UserAgent.prototype.getDocumentMode=webfont.UserAgent.prototype.getDocumentMode,webfont.UserAgent.prototype.isSupportingWebFont=webfont.UserAgent.prototype.isSupportingWebFont,webfont.AscenderScript=function(t,e){this.domHelper_=t,this.configuration_=e},webfont.AscenderScript.NAME="ascender",webfont.AscenderScript.VARIATIONS={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"},webfont.AscenderScript.prototype.supportUserAgent=function(t,e){return e(t.isSupportingWebFont())},webfont.AscenderScript.prototype.load=function(t){var e=this.configuration_.key,n="https:"==document.location.protocol?"https:":"http:",o=n+"//webfonts.fontslive.com/css/"+e+".css";this.domHelper_.insertInto("head",this.domHelper_.createCssLink(o));var i=this.parseFamiliesAndVariations(this.configuration_.families);t(i.families,i.variations)},webfont.AscenderScript.prototype.parseFamiliesAndVariations=function(t){var e,n,o;e=[],n={};for(var i=0,r=t.length;r>i;i++)o=this.parseFamilyAndVariations(t[i]),e.push(o.family),n[o.family]=o.variations;return{families:e,variations:n}},webfont.AscenderScript.prototype.parseFamilyAndVariations=function(t){var e,n,o;return o=t.split(":"),e=o[0],n=[],n=o[1]?this.parseVariations(o[1]):["n4"],{family:e,variations:n}},webfont.AscenderScript.prototype.parseVariations=function(t){for(var e=t.split(","),n=[],o=0,i=e.length;i>o;o++){var r=e[o];if(r){var s=webfont.AscenderScript.VARIATIONS[r];n.push(s?s:r)}}return n},window.WebFont.addModule(webfont.AscenderScript.NAME,function(t){var e=new webfont.UserAgentParser(navigator.userAgent,document),n=e.parse(),o=new webfont.DomHelper(document,n);return new webfont.AscenderScript(o,t)}),webfont.LastResortWebKitFontWatchRunner=function(t,e,n,o,i,r,s,a,h){webfont.LastResortWebKitFontWatchRunner.superCtor_.call(this,t,e,n,o,i,r,s,a,h),this.webKitLastResortFontSizes_=this.setUpWebKitLastResortFontSizes_(),this.webKitLastResortSizeChange_=!1},webfont.extendsClass(webfont.FontWatchRunner,webfont.LastResortWebKitFontWatchRunner),webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS={Arimo:!0,Cousine:!0,Tinos:!0},webfont.LastResortWebKitFontWatchRunner.prototype.setUpWebKitLastResortFontSizes_=function(){var t=["Times New Roman","Lucida Sans Unicode","Courier New","Tahoma","Arial","Microsoft Sans Serif","Times","Lucida Console","Sans","Serif","Monospace"],e=t.length,n={},o=this.createHiddenElementWithFont_(t[0],!0);n[this.fontSizer_.getWidth(o)]=!0;for(var i=1;e>i;i++){var r=t[i];this.domHelper_.setStyle(o,this.computeStyleString_(r,this.fontDescription_,!0)),n[this.fontSizer_.getWidth(o)]=!0,"4"!=this.fontDescription_[1]&&(this.domHelper_.setStyle(o,this.computeStyleString_(r,this.fontDescription_[0]+"4",!0)),n[this.fontSizer_.getWidth(o)]=!0)}return this.domHelper_.removeElement(o),n},webfont.LastResortWebKitFontWatchRunner.prototype.check_=function(){var t=this.fontSizer_.getWidth(this.requestedFontA_),e=this.fontSizer_.getWidth(this.requestedFontB_);!this.webKitLastResortSizeChange_&&t==e&&this.webKitLastResortFontSizes_[t]&&(this.webKitLastResortFontSizes_={},this.webKitLastResortFontSizes_[t]=!0,this.webKitLastResortSizeChange_=!0),this.originalSizeA_==t&&this.originalSizeB_==e||this.webKitLastResortFontSizes_[t]||this.webKitLastResortFontSizes_[e]?this.getTime_()-this.started_>=5e3?this.webKitLastResortFontSizes_[t]&&this.webKitLastResortFontSizes_[e]&&webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS[this.fontFamily_]?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_):this.asyncCheck_():this.finish_(this.activeCallback_)},webfont.FontApiUrlBuilder=function(t){if(t)this.apiUrl_=t;else{var e="https:"==window.location.protocol?"https:":"http:";this.apiUrl_=e+webfont.FontApiUrlBuilder.DEFAULT_API_URL}this.fontFamilies_=[],this.subsets_=[]},webfont.FontApiUrlBuilder.DEFAULT_API_URL="//fonts.googleapis.com/css",webfont.FontApiUrlBuilder.prototype.setFontFamilies=function(t){this.parseFontFamilies_(t)},webfont.FontApiUrlBuilder.prototype.parseFontFamilies_=function(t){for(var e=t.length,n=0;e>n;n++){var o=t[n].split(":");3==o.length&&this.subsets_.push(o.pop()),this.fontFamilies_.push(o.join(":"))}},webfont.FontApiUrlBuilder.prototype.webSafe=function(t){return t.replace(/ /g,"+")},webfont.FontApiUrlBuilder.prototype.build=function(){if(0==this.fontFamilies_.length)throw new Error("No fonts to load !");if(-1!=this.apiUrl_.indexOf("kit="))return this.apiUrl_;for(var t=this.fontFamilies_.length,e=[],n=0;t>n;n++)e.push(this.webSafe(this.fontFamilies_[n]));var o=this.apiUrl_+"?family="+e.join("%7C");return this.subsets_.length>0&&(o+="&subset="+this.subsets_.join(",")),o},webfont.FontApiParser=function(t){this.fontFamilies_=t,this.parsedFontFamilies_=[],this.variations_={},this.fontTestStrings_={},this.fvd_=new webfont.FontVariationDescription},webfont.FontApiParser.VARIATIONS={ultralight:"n2",light:"n3",regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",ul:"n2",l:"n3",r:"n4",b:"n7",i:"i4",bi:"i7"},webfont.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},webfont.FontApiParser.prototype.parse=function(){for(var t=this.fontFamilies_.length,e=0;t>e;e++){var n=this.fontFamilies_[e].split(":"),o=n[0],i=["n4"];if(n.length>=2){var r=this.parseVariations_(n[1]);if(r.length>0&&(i=r),3==n.length){var s=this.parseSubsets_(n[2]);if(s.length>0){var a=webfont.FontApiParser.INT_FONTS[s[0]];a&&(this.fontTestStrings_[o]=a)}}}if(!this.fontTestStrings_[o]){var h=webfont.FontApiParser.INT_FONTS[o];h&&(this.fontTestStrings_[o]=h)}this.parsedFontFamilies_.push(o),this.variations_[o]=i}},webfont.FontApiParser.prototype.generateFontVariationDescription_=function(t){if(!t.match(/^[\w ]+$/))return"";var e=webfont.FontApiParser.VARIATIONS[t];if(e)return e;var n=t.match(/^(\d*)(\w*)$/),o=n[1],i=n[2],r=i?i:"n",s=o?o.substr(0,1):"4",a=this.fvd_.expand([r,s].join(""));return a?this.fvd_.compact(a):null},webfont.FontApiParser.prototype.parseVariations_=function(t){var e=[];if(!t)return e;for(var n=t.split(","),o=n.length,i=0;o>i;i++){var r=n[i],s=this.generateFontVariationDescription_(r);s&&e.push(s)}return e},webfont.FontApiParser.prototype.parseSubsets_=function(t){var e=[];return t?t.split(","):e},webfont.FontApiParser.prototype.getFontFamilies=function(){return this.parsedFontFamilies_},webfont.FontApiParser.prototype.getVariations=function(){return this.variations_},webfont.FontApiParser.prototype.getFontTestStrings=function(){return this.fontTestStrings_},webfont.GoogleFontApi=function(t,e,n){this.userAgent_=t,this.domHelper_=e,this.configuration_=n},webfont.GoogleFontApi.NAME="google",webfont.GoogleFontApi.prototype.supportUserAgent=function(t,e){e(t.isSupportingWebFont())},webfont.GoogleFontApi.prototype.getFontWatchRunnerCtor=function(){return"AppleWebKit"==this.userAgent_.getEngine()?webfont.LastResortWebKitFontWatchRunner:webfont.FontWatchRunner},webfont.GoogleFontApi.prototype.load=function(t){var e=this.domHelper_,n="MSIE"==this.userAgent_.getName()&&1!=this.configuration_.blocking;n?e.whenBodyExists(webfont.bind(this,this.insertLink_,t)):this.insertLink_(t)},webfont.GoogleFontApi.prototype.insertLink_=function(t){var e=this.domHelper_,n=new webfont.FontApiUrlBuilder(this.configuration_.api),o=this.configuration_.families;n.setFontFamilies(o);var i=new webfont.FontApiParser(o);i.parse(),e.insertInto("head",e.createCssLink(n.build())),t(i.getFontFamilies(),i.getVariations(),i.getFontTestStrings())},window.WebFont.addModule(webfont.GoogleFontApi.NAME,function(t){var e=new webfont.UserAgentParser(navigator.userAgent,document),n=e.parse();return new webfont.GoogleFontApi(n,new webfont.DomHelper(document,n),t)}),webfont.CustomCss=function(t,e){this.domHelper_=t,this.configuration_=e},webfont.CustomCss.NAME="custom",webfont.CustomCss.prototype.load=function(t){for(var e=this.configuration_.urls||[],n=this.configuration_.families||[],o=0,i=e.length;i>o;o++){var r=e[o];this.domHelper_.insertInto("head",this.domHelper_.createCssLink(r))}t(n)},webfont.CustomCss.prototype.supportUserAgent=function(t,e){return e(t.isSupportingWebFont())},window.WebFont.addModule(webfont.CustomCss.NAME,function(t){var e=new webfont.UserAgentParser(navigator.userAgent,document),n=e.parse(),o=new webfont.DomHelper(document,n);return new webfont.CustomCss(o,t)}),webfont.FontdeckScript=function(t,e,n){this.global_=t,this.domHelper_=e,this.configuration_=n,this.fontFamilies_=[],this.fontVariations_={},this.fvd_=new webfont.FontVariationDescription},webfont.FontdeckScript.NAME="fontdeck",webfont.FontdeckScript.HOOK="__webfontfontdeckmodule__",webfont.FontdeckScript.API="//f.fontdeck.com/s/css/js/",webfont.FontdeckScript.prototype.getScriptSrc=function(t){var e="https:"==this.global_.location.protocol?"https:":"http:",n=this.configuration_.api||webfont.FontdeckScript.API;return e+n+this.global_.document.location.hostname+"/"+t+".js"},webfont.FontdeckScript.prototype.supportUserAgent=function(t,e){var n=this.configuration_.id,o=this;if(n){this.global_[webfont.FontdeckScript.HOOK]||(this.global_[webfont.FontdeckScript.HOOK]={}),this.global_[webfont.FontdeckScript.HOOK][n]=function(t,n){for(var i=0,r=n.fonts.length;r>i;++i){var s=n.fonts[i];o.fontFamilies_.push(s.name),o.fontVariations_[s.name]=[o.fvd_.compact("font-weight:"+s.weight+";font-style:"+s.style)]}e(t)};var i=this.domHelper_.createScriptSrc(this.getScriptSrc(n));this.domHelper_.insertInto("head",i)}else e(!0)},webfont.FontdeckScript.prototype.load=function(t){t(this.fontFamilies_,this.fontVariations_)},window.WebFont.addModule(webfont.FontdeckScript.NAME,function(t){var e=new webfont.UserAgentParser(navigator.userAgent,document),n=e.parse(),o=new webfont.DomHelper(document,n);return new webfont.FontdeckScript(window,o,t)}),webfont.MonotypeScript=function(t,e,n,o,i){this.global_=t,this.userAgent_=e,this.domHelper_=n,this.doc_=o,this.configuration_=i,this.fontFamilies_=[],this.fontVariations_={}},webfont.MonotypeScript.NAME="monotype",webfont.MonotypeScript.HOOK="__mti_fntLst",webfont.MonotypeScript.SCRIPTID="__MonotypeAPIScript__",webfont.MonotypeScript.prototype.supportUserAgent=function(t,e){var n=this,o=n.configuration_.projectId;if(o){var i=n.domHelper_.createScriptSrc(n.getScriptSrc(o));i.id=webfont.MonotypeScript.SCRIPTID+o,i.onreadystatechange=function(t){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,i.onload(t))},i.onload=function(i){if(n.global_[webfont.MonotypeScript.HOOK+o]){var r=n.global_[webfont.MonotypeScript.HOOK+o]();if(r&&r.length){var s;for(s=0;s<r.length;s++)n.fontFamilies_.push(r[s].fontfamily)}}e(t.isSupportingWebFont())},this.domHelper_.insertInto("head",i)}else e(!0)},webfont.MonotypeScript.prototype.getScriptSrc=function(t){var e=this.protocol(),n=(this.configuration_.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return e+"//"+n+"/"+t+".js"},webfont.MonotypeScript.prototype.load=function(t){t(this.fontFamilies_,this.fontVariations_)},webfont.MonotypeScript.prototype.protocol=function(){var t=["http:","https:"],e=t[0];if(this.doc_&&this.doc_.location&&this.doc_.location.protocol){var n=0;for(n=0;n<t.length;n++)if(this.doc_.location.protocol===t[n])return this.doc_.location.protocol}return e},window.WebFont.addModule(webfont.MonotypeScript.NAME,function(t){var e=new webfont.UserAgentParser(navigator.userAgent,document),n=e.parse(),o=new webfont.DomHelper(document,n);return new webfont.MonotypeScript(window,n,o,document,t)}),webfont.TypekitScript=function(t,e,n){this.global_=t,this.domHelper_=e,this.configuration_=n,this.fontFamilies_=[],this.fontVariations_={}},webfont.TypekitScript.NAME="typekit",webfont.TypekitScript.HOOK="__webfonttypekitmodule__",webfont.TypekitScript.prototype.getScriptSrc=function(t){var e="https:"==window.location.protocol?"https:":"http:",n=this.configuration_.api||e+"//use.typekit.com";return n+"/"+t+".js"},webfont.TypekitScript.prototype.supportUserAgent=function(t,e){var n=this.configuration_.id,o=this.configuration_,i=this;
if(n){this.global_[webfont.TypekitScript.HOOK]||(this.global_[webfont.TypekitScript.HOOK]={}),this.global_[webfont.TypekitScript.HOOK][n]=function(n){var r=function(t,n,o){i.fontFamilies_=n,i.fontVariations_=o,e(t)};n(t,o,r)};var r=this.domHelper_.createScriptSrc(this.getScriptSrc(n));this.domHelper_.insertInto("head",r)}else e(!0)},webfont.TypekitScript.prototype.load=function(t){t(this.fontFamilies_,this.fontVariations_)},window.WebFont.addModule(webfont.TypekitScript.NAME,function(t){var e=new webfont.UserAgentParser(navigator.userAgent,document),n=e.parse(),o=new webfont.DomHelper(document,n);return new webfont.TypekitScript(window,o,t)}),window.WebFontConfig&&window.WebFont.load(window.WebFontConfig);